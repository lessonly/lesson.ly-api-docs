# Paths

## List Paths

```shell
<%= api_get_request('/paths') %>
```

> The above command returns JSON structured like this:

```json
{
  "type": "paths",
  "paths": [
    {
      "id": 271,
      "title": "Sales Onboarding",
      "archived_at": "2018-02-28T08:53:40.614-05:00",
      "archived_by_user_id": 78,
      "is_certification": true
    },
    {
      "id": 33,
      "title": "Moderation Team Onboarding - August",
      "archived_at": "2017-08-18T15:26:12.786-04:00",
      "archived_by_user_id": 13018,
      "is_certification": false
    }
  ]
}
```

This endpoint retrieves all paths.

### HTTP Request

`GET https://api.lessonly.com/api/v1/paths`

## List Paths (v1.1)

```shell
<%= api_get_request('/paths', 'v1.1') %>
```

> The above command returns JSON structured like this:

```json
{
  "type": "paths",
  "paths": [
    {
      "resource_type": "path",
      "id": 31,
      "title": "Competition",
      "archived_at": null,
      "archived_by_user_id": null,
      "public": true,
      "created_at": "2017-08-17T13:09:35Z",
      "last_updated_at": "2018-02-02T12:52:53Z",
      "published_at": "2017-08-17T18:54:22.870-04:00",
      "publisher_id": 668968,
      "tags": [
          {
              "id": 3,
              "resource_type": "tag",
              "name": "Sales"
          }
      ],
      "links": {
          "shareable": "https://dev.lessonly.com/path/31-competition",
          "overview": "https://dev.lessonly.com/paths/31-competition"
      },
      "is_certification": false
    }
  ]
}
```

This endpoint retrieves all paths

### HTTP Request

`GET https://api.lessonly.com/api/v1.1/paths`


## Show Path Details

```shell
<%= api_get_request('/paths/:path_id') %>
```

> The above command returns JSON structured like this:

```json
{
  "type": "path",
  "id": 1,
  "resource_type": "path",
  "title": "Developer Onboarding",
  "description": "All you need to know to get up-and-running.",
  "enforced_order": true,
  "public": false,
  "created_at": "2017-07-24T10:47:23Z",
  "last_updated_at": "2017-07-24T10:49:10Z",
  "published_at": null,
  "publisher_id": null,
  "tags": [
    {
      "id": 1,
      "resource_type": "tag",
      "name": "Engineering"
    }
  ],
  "links": {
    "shareable": "https://mycompany.lessonly.com/path/1-developer-onboarding",
    "overview": "https://mycompany.lessonly.com/paths/1-developer-onboarding"
  },
  "archived_at": null,
  "archived_by_user_id": null,
  "contents": [
    {
      "id": 10,
      "resource_type": "lesson",
      "title": "Setting up a development environment",
      "archived_at": null,
      "archived_by_user_id": null
    },
    {
      "id": 2,
      "resource_type": "wait_step",
      "effect": "locked",
      "condition": "prev_step_finished",
      "unit": "days",
      "amount": 3
    },
    {
      "id": 20,
      "resource_type": "path",
      "title": "Know Your Tools",
      "archived_at": null,
      "archived_by_user_id": null,
      "contents": [
        {
          "id": 4,
          "type": "lesson",
          "title": "Clubhouse 101",
          "archived_at": null,
          "archived_by_user_id": null
        },
        {
          "id": 5,
          "resource_type": "placeholder",
          "description": "Add a lesson about Github"
        }
      ]
    }
  ],
  "is_certification": false
}
```

This endpoint retrieves all the path's details including their steps.

The `"resource_type"` of Paths’ `"contents"` will be one of `"lesson"`, `"wait_step"`, `"path"`, or `"placeholder"`.

Paths’ `"contents"` may be nested.

### HTTP Request

`GET https://api.lessonly.com/api/v1/paths/:path_id`

### Query Parameters

Parameter | Required | Type |  Description
--- | --- | --- | ---
path_id | yes | Positive Integer | The path to access. The company must have access to the path.

## Path Total Completions (v1)

```shell
<%= api_get_request('/paths/:path_id/total_completions') %>
```

> The above command returns JSON structured like this:

```json
{
  "type": "path_total_completion_count",
  "completion_count": 44
}
```

This endpoint retrieves the number of completions for a given path.

### HTTP Request

`GET https://api.lessonly.com/api/v1/paths/:path/total_completions`

## Path Completion Breakdown (v1)

```shell
<%= api_get_request('/paths/:path_id/completion_breakdown') %>

```

> The above command returns JSON structured like this:

```json
{
  "type": "path_completion_breakdown",
  "total": 44,
  "via_assignment": 22,
  "via_other": 22
}
```

This endpoint retrieves the completion breakdown for a given path.

<aside class="notice">
  A completion is only counted as via_assignment if the path was directly assigned to the learner, and not via another path.
</aside>



## Archive Path

```shell
<%= put_request('/paths/:path_id/archive').chomp(' \\') %>
```

> The above command returns JSON structured like this:

```json
{
  "type": "path",
  "id": 1,
  "resource_type": "path",
  "title": "Developer Onboarding",
  "description": "All you need to know to get up-and-running.",
  "enforced_order": true,
  "public": false,
  "created_at": "2017-07-24T10:47:23Z",
  "last_updated_at": "2017-07-24T10:49:10Z",
  "published_at": null,
  "publisher_id": null,
  "tags": [
    {
      "id": 1,
      "resource_type": "tag",
      "name": "Engineering"
    }
  ],
  "links": {
    "shareable": "https://mycompany.lessonly.com/path/1-developer-onboarding",
    "overview": "https://mycompany.lessonly.com/paths/1-developer-onboarding"
  },
  "archived_at": "2016-10-13T09:51:13.549-04:00",
  "archived_by_user_id": 1,
  "contents": [
    {
      "id": 10,
      "resource_type": "lesson",
      "title": "Setting up a development environment",
      "archived_at": null,
      "archived_by_user_id": null
    },
    {
      "id": 2,
      "resource_type": "wait_step",
      "effect": "locked",
      "condition": "prev_step_finished",
      "unit": "days",
      "amount": 3
    },
    {
      "id": 20,
      "resource_type": "path",
      "title": "Know Your Tools",
      "archived_at": null,
      "archived_by_user_id": null,
      "contents": [
        {
          "id": 4,
          "type": "lesson",
          "title": "Clubhouse 101",
          "archived_at": null,
          "archived_by_user_id": null
        },
        {
          "id": 5,
          "resource_type": "placeholder",
          "description": "Add a lesson about Github"
        }
      ]
    }
  ]
}
```

This endpoint allows the archiving of a single path.

### HTTP Request

`PUT https://api.lessonly.com/api/v1/paths/:path_id/archive`

### Query Parameters

Parameter | Required | Type |  Description
--- | --- | --- | ---
path_id | yes | Positive Integer | The path to archive. The company must have access to the path.

## Restore Path

```shell
<%= put_request('/paths/:path_id/restore').chomp(' \\') %>
```

> The above command returns JSON structured like this:

```json
{
  "type": "path",
  "id": 1,
  "resource_type": "path",
  "title": "Developer Onboarding",
  "description": "All you need to know to get up-and-running.",
  "enforced_order": true,
  "public": false,
  "created_at": "2017-07-24T10:47:23Z",
  "last_updated_at": "2017-07-24T10:49:10Z",
  "published_at": null,
  "publisher_id": null,
  "tags": [
    {
      "id": 1,
      "resource_type": "tag",
      "name": "Engineering"
    }
  ],
  "links": {
    "shareable": "https://mycompany.lessonly.com/path/1-developer-onboarding",
    "overview": "https://mycompany.lessonly.com/paths/1-developer-onboarding"
  },
  "archived_at": null,
  "archived_by_user_id": null,
  "contents": [
    {
      "id": 10,
      "resource_type": "lesson",
      "title": "Setting up a development environment",
      "archived_at": null,
      "archived_by_user_id": null
    },
    {
      "id": 2,
      "resource_type": "wait_step",
      "effect": "locked",
      "condition": "prev_step_finished",
      "unit": "days",
      "amount": 3
    },
    {
      "id": 20,
      "resource_type": "path",
      "title": "Know Your Tools",
      "archived_at": null,
      "archived_by_user_id": null,
      "contents": [
        {
          "id": 4,
          "type": "lesson",
          "title": "Clubhouse 101",
          "archived_at": null,
          "archived_by_user_id": null
        },
        {
          "id": 5,
          "resource_type": "placeholder",
          "description": "Add a lesson about Github"
        }
      ]
    }
  ]
}
```

This endpoint allows the restoring of a single archived path.

### HTTP Request

`PUT https://api.lessonly.com/api/v1/paths/:path_id/restore`

### Query Parameters

Parameter | Required | Type |  Description
--- | --- | --- | ---
path_id | yes | Positive Integer | The path to restore.  The company must have access to the path.

## Assigning a Path

```shell
<%= put_request('/paths/:path_id/assignments', params: true) %>
-d '{
  "assignments": [
    {
      "assignee_id": 1,
      "due_by": "2020-09-30T00:00:00Z",
      "notify": false
    }
  ]
}'
```


> A successful update returns a JSON formatted version of the assignments made:

```json
{
  "type": "update_path_assignments",
  "assignments": [
    {
      "id": 1,
      "resource_type": "assignment",
      "assignee_id": 1,
      "assignable_type": "LearningPaths::Path",
      "assignable_id": 1,
      "ext_uid": "ABC123",
      "due_by": "2020-09-30T00:00:00Z",
      "reassigned_at": "2020-09-30T00:00:00Z",
      "completed_at": "2020-09-30T00:00:00Z",
      "status": "Incomplete",
      "score": null
    }
  ]
}
```

This endpoint allows you to make assignments to a particular path in the API.

### HTTP Request

`PUT https://api.lessonly.com/api/v1/paths/:path_id/assignments -d params`

### Query Parameters

Parameter | Required | Type |  Description
--- | --- | --- | ---
path_id | yes | Positive Integer | The path to access. The company must have access to the path.
assignments | no | Hash | A hash of assignments to be made to the path.  If the assignment for a particular user already exists, the user will be reassigned the path (only completed assignments will be reassigned). By default, an email will be sent to the assignee; it will come from notifications@lessonly.com. To suppress the email notification set `notify` to `false`.

## List Path Assignments

```shell
<%= api_get_request('/paths/:path_id/assignments') %>
```

> The above command returns JSON structured like this:

```json
{
  "type": "path_assignments",
  "total_assignments": 2,
  "page": 1,
  "per_page": 10,
  "total_pages": 1,
  "assignments":[
    {
      "id": 1,
      "resource_type": "assignment",
      "assignee_id": 2,
      "assignable_type": "LearningPaths::Path",
      "assignable_id": 1,
      "score": 80,
      "ext_uid": "ABC123",
      "due_by": "2020-09-30T00:00:00Z",
      "assigned_at": "2020-03-20T00:00:00Z",
      "reassigned_at": "2020-09-30T00:00:00Z",
      "status": "Completed",
      "started_at": "2016-03-28T14:15:17Z",
      "completed_at": "2016-03-28T18:20:06Z",
      "updated_at": "2016-03-28T18:20:06Z"
    },
    {
      "id": 2,
      "resource_type": "assignment",
      "assignee_id": 3,
      "assignable_type": "LearningPaths::Path",
      "assignable_id": 1,
      "score": null,
      "ext_uid": "DEF456",
      "due_by": "2020-09-30T00:00:00Z",
      "reassigned_at": "2020-09-30T00:00:00Z",
      "status": "Incomplete",
      "started_at": "2016-03-28T14:15:17Z",
      "completed_at": null,
      "updated_at": "2016-03-28T18:20:06Z"
    }
  ]
}
```

This endpoint retrieves all the assignments for a particular path.

### HTTP Request

`GET https://api.lessonly.com/api/v1/paths/:path_id/assignments`

### Query Parameters

Parameter | Required | Type |  Description
--- | --- | --- | ---
path_id | yes | Positive Integer | The path to access.  The company must have access to the path.
<%= pagination_query_params.chomp %>

## Path Assignments Completed

```shell
<%= api_get_request('/paths/:path_id/assignments/completed') %>
```

> The above command returns JSON structured like this:

```json
{
  "type": "path_assignments_completed",
  "completed_count": 11
}
```

This endpoint retrieves the count of completed assignments for a particular path.

### HTTP Request

`GET https://api.lessonly.com/api/v1/paths/:path_id/assignments/completed`

### Query Parameters

 Parameter | Required | Type |  Description
 --- | --- | --- | ---
 path_id | yes | Positive Integer | The path to access.  The company must have access to the path.
